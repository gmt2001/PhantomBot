<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <script type="text/javascript">
            function checkHash() {
                var h = location.hash;

                if (h.length > 0) {
                    h = h.substring(1);

                    var spl = h.split("&");

                    for (var i = 0; i < spl.length; i++) {
                        var sspl = spl[i].split("=");

                        if (sspl[0] == "access_token") {
                            document.getElementById("msg").innerHTML = "Your Twitch OAuth key is <br><center><b>oauth:" + sspl[1] + "</b></center><br>"
                                    + "Please update the key on the bot by typing the command <b>apioauth</b> in the console (black screen) and then, when the "
                                    + "bot asks for it, paste or type in the key and hit enter.";

                            document.getElementById("connect").innerHTML = "";
                        }
                    }
                }
            }

            setTimeout(function () {
                checkHash();
            }, 500);
        </script>
    </head>
    <body>
        <div id="msg">When you click the <b>Connect</b> button, 
            you will be redirected to Twitch.TV to authorize the bot to make requests on your behalf.<br>
            Please make sure you login and authorize using the <b>Channel Owner's</b> account. <br>
            You can also choose to use the account of a channel editor on partnered channels but will not be able to use the new subscriber notifications.
        </div>
        <br><br>The following permissions are requested (Twitch will display this list too):<br>
        <ul>
            <li>channel_editor: Allows the bot to change channel metadata including game name, title, delay, etc.</li>
            <li>channel_commercial: Allows the bot to run commercials on your channel if it is partnered.</li>
            <li>channel_subscriptions: Allows the bot to get a list of the channels subscribers if it is partnered.</li>
        </ul>
        <br>
        NOTE: The bot's oauth key will still be used for the IRC connection. This channel owner's key is just to authorize the bot to the above actions on the channel.
        <br><div id="connect">NOTE: The name of the application to be authorized on Twitch.TV will be <b>PhantomBot.net</b>.<br>
            <a href="https://api.twitch.tv/kraken/oauth2/authorize?response_type=token&client_id=rp2uhin43rvpr70nzwnh07417x2gck0&redirect_uri=http://localhost:25000/twitchapi.html&scope=channel_editor+channel_commercial+channel_subscriptions"><img src="http://localhost:25000/twitchconnect.png"></a>

            <br>
            <br>
        </div>
        NOTE: Javascript is required to use this page.
    </body>
</html>
